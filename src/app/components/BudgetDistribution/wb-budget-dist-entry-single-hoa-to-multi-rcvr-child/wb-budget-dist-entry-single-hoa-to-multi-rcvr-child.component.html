<mat-accordion>
    <mat-expansion-panel [hideToggle]="false" [expanded]="accordionStep === 0" (opened)="setAccordionStep(0)" class="formDesign">
        <mat-expansion-panel-header>
            <mat-panel-title>Search Criterias</mat-panel-title>
        </mat-expansion-panel-header>
        <app-hoa-details (onEnteringHoaDetails)="filterHOA($event)"></app-hoa-details>
        <!-- <mat-action-row>
            <button mat-raised-button color="primary" (click)="onHoaSearch()">Search</button>
        </mat-action-row> -->
    </mat-expansion-panel>

    <mat-expansion-panel [hideToggle]="false" [expanded]="accordionStep === 1" (opened)="setAccordionStep(1)" class="formDesign">
        <mat-expansion-panel-header>
            <mat-panel-title>Available Head of Accounts<span class="badge bg-secondary mx-3" *ngIf="clickedRows.size != 0">{{ clickedRowsArray[0].demandNo + "-" + clickedRowsArray[0].majorHead + "-" + clickedRowsArray[0].submajorHead + "-" + clickedRowsArray[0].minorHead + "-" + clickedRowsArray[0].schemeHead + "-" + clickedRowsArray[0].detailHead + "-" + clickedRowsArray[0].subdetailHead + "-" + clickedRowsArray[0].votedCharged }}</span></mat-panel-title>
        </mat-expansion-panel-header>

        <!-- Available Head of Accounts Table -->
        <div class="row pt-0 pb-0">
            <div class="col-12">
                <div class="xformDesign">
                    <table mat-table matSort [dataSource]="copyAllotSource" class="mt-2 mat-elevation-z0 xformDesign full-width">
                        <!-- aId Column -->
                        <ng-container matColumnDef="allotmentId">
                            <th mat-header-cell mat-sort-header="allotmentId" class="mat-tab-header-txt-col text-nowrap" *matHeaderCellDef>Allotment ID</th>
                            <td mat-cell *matCellDef="let element">{{ element.allotmentId }}</td>
                        </ng-container>

                        <!-- aDate Column -->
                        <ng-container matColumnDef="allotmentdate">
                            <th mat-header-cell mat-sort-header="allotmentdate" class="mat-tab-header-txt-col text-nowrap" *matHeaderCellDef>Allotment Date</th>
                            <td mat-cell *matCellDef="let element">{{ element.allotmentDate }}</td>
                        </ng-container>

                        <!-- hoa Column -->
                        <ng-container matColumnDef="hoa">
                            <th mat-header-cell mat-sort-header="hoa" class="mat-tab-header-txt-col" *matHeaderCellDef>Head of Account</th>
                            <td mat-cell *matCellDef="let element" class="text-nowrap px-1">{{ element.demandNo + "-" + element.majorHead + "-" + element.submajorHead + "-" + element.minorHead + "-" + element.schemeHead + "-" + element.detailHead + "-" + element.subdetailHead + "-" + element.votedCharged }}</td>
                        </ng-container>

                        <!-- allotmentAmmount Column -->
                        <ng-container matColumnDef="budgetAmt">
                            <th mat-header-cell mat-sort-header="budgetAmt" class="mat-tab-header-txt-col" *matHeaderCellDef>Budget Amount</th>
                            <td mat-cell *matCellDef="let element"  class="text-nowrap px-1">₹ {{ element.budgetAllotedAmount | number : "1.0-0" }}</td>
                        </ng-container>

                        <!-- ceilAmmount Column -->
                        <ng-container matColumnDef="ceilAmt">
                            <th mat-header-cell mat-sort-header="ceilAmt" class="mat-tab-header-txt-col" *matHeaderCellDef>Ceilling Amount</th>
                            <td mat-cell *matCellDef="let element"  class="text-nowrap px-1">{{ element.ceilingAmount | number : "1.0-0" }}</td>
                        </ng-container>

                        <!-- balance Column -->
                        <ng-container matColumnDef="balanceamount">
                            <th mat-header-cell mat-sort-header="balanceamount" class="mat-tab-header-txt-col" *matHeaderCellDef>Balance Ceilling Amount</th>
                            <td mat-cell *matCellDef="let element"  class="text-nowrap px-1">₹ {{ element.ceilingAmount - element.provisionalReleasedAmount - element.FE_provisional_release | number : "1.0-0" }}</td>
                        </ng-container>

                        <!-- selection Column -->
                        <ng-container matColumnDef="selection">
                            <th mat-header-cell *matHeaderCellDef>
                                <!-- https://stackblitz.com/angular/lrpjroljdly?embed=1&file=app/table-selection-example.html -->
                            </th>
                            <td mat-cell *matCellDef="let row" class="px-2">
                                <mat-radio-button (click)="$event.stopPropagation()" (change)="$event ? tickRow($event, row) : null" [checked]="clickedRows.has(row)"> </mat-radio-button>
                            </td>
                        </ng-container>

                        <tr mat-header-row class="col" *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row [class.demo-row-is-clicked]="clickedRows.has(row)" *matRowDef="let row; columns: displayedColumns"></tr>

                        <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="4">No data matching the filter</td>
                        </tr>
                    </table>
                    <div class="d-flex justify-content-between">
                        <p class="pt-4">{{ clickedRows.size }} items selected.</p>
                        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"> </mat-paginator>
                    </div>
                </div>
            </div>
        </div>

        <mat-action-row>
            <button mat-raised-button color="primary" (click)="onHoaSelect()" *ngIf="clickedRows.size != 0">Next</button>
        </mat-action-row>
    </mat-expansion-panel>

    <mat-expansion-panel [hideToggle]="false" [expanded]="accordionStep === 2" (opened)="setAccordionStep(2)" class="formDesign" *ngIf="clickedRows.size != 0">
        <mat-expansion-panel-header>
            <!-- <mat-panel-title>
                Receiver Details<span class="badge bg-secondary mx-3" *ngIf="mapId != null">{{ mapId == EnumReleaseMapType.HOD_to_SAO ? "HOD to SAO" : "HOD to DDO" }}</span>
                <span class="badge bg-secondary ml-3" *ngIf="isDdoSelected">DDO : {{ selectedReceiver.code }}</span>
                <span class="badge bg-secondary ml-3" *ngIf="isSaoSelected">SAO : {{ selectedReceiver.code }}</span>
            </mat-panel-title> -->
            <mat-panel-title>
                Receiver Details :
                <div>
                    <span class="badge bg-secondary mx-2" *ngIf="selectedHodToSaoArray.length > 0 || mapId == EnumReleaseMapType.HOD_to_SAO">{{ "HOD to SAO" }}</span>
                    <span *ngIf="selectedHodToSaoArray.length > 0">:</span>
                    <span class="badge bg-secondary mx-2" *ngFor="let selectedSao of selectedHodToSaoArray">{{ selectedSao.code }}</span>
                </div>
                <div class="mx-5">
                    <span class="badge bg-secondary mx-2" *ngIf="selectedHodToDdoArray.length > 0 || mapId == EnumReleaseMapType.HOD_to_DDO">{{ "HOD to DDO" }}</span>
                    <span *ngIf="selectedHodToDdoArray.length > 0">:</span>
                    <span class="badge bg-secondary mx-2" *ngFor="let selectedDdo of selectedHodToDdoArray">{{ selectedDdo.code }}</span>
                </div>
                <div class="mx-5">
                    <span class="badge bg-secondary mx-2" *ngIf="selectedSaoToSaoArray.length > 0 || mapId == EnumReleaseMapType.SAO_to_SAO">{{ "SAO to SAO" }}</span>
                    <span *ngIf="selectedSaoToSaoArray.length > 0">:</span>
                    <span class="badge bg-secondary mx-2" *ngFor="let selectedSaoToSao of selectedSaoToSaoArray">{{ selectedSaoToSao.code }}</span>
                </div>
                <div class="mx-5">
                    <span class="badge bg-secondary mx-2" *ngIf="selectedSaoToDdoArray.length > 0 || mapId == EnumReleaseMapType.SAO_to_DDO">{{ "SAO to DDO" }}</span>
                    <span *ngIf="selectedSaoToDdoArray.length > 0">:</span>
                    <span class="badge bg-secondary mx-2" *ngFor="let selecteSaoToDdo of selectedSaoToDdoArray">{{ selecteSaoToDdo.code }}</span>
                </div>
                <!-- <div class="mx-5">
                    <span class="badge bg-secondary mx-2" *ngIf="selectedSaoToSaoArray.length > 0 || mapId == EnumReleaseMapType.SAO_to_SAO">{{ "SAO to SAO" }}</span>
                    <span *ngIf="selectedSaoToSaoArray.length > 0">:</span>
                    <span class="badge bg-secondary mx-2" *ngFor="let selectedSaoToSao of selectedSaoToSaoArray">{{ selectedSaoToSao.code }}</span>
                </div>
                <div class="mx-5">
                    <span class="badge bg-secondary mx-2" *ngIf="selectedSaoToDdoArray.length > 0 || mapId == EnumReleaseMapType.SAO_to_DDO">{{ "SAO to DDO" }}</span>
                    <span *ngIf="selectedSaoToDdoArray.length > 0">:</span>
                    <span class="badge bg-secondary mx-2" *ngFor="let selecteSaoToDdo of selectedSaoToDdoArray">{{ selecteSaoToDdo.code }}</span>
                </div> -->
            </mat-panel-title>
        </mat-expansion-panel-header>
        <i>Selected Head of Account: {{ clickedRowsArray[0].demandNo + "-" + clickedRowsArray[0].majorHead + "-" + clickedRowsArray[0].submajorHead + "-" + clickedRowsArray[0].minorHead + "-" + clickedRowsArray[0].schemeHead + "-" + clickedRowsArray[0].detailHead + "-" + clickedRowsArray[0].subdetailHead + "-" + clickedRowsArray[0].votedCharged }}</i>
        <form [formGroup]="receiverForm">
            <div class="row mt-4">
                <!-- <div class="col-md-3">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Map Type<span style="color: red"> *</span></mat-label>
                        <mat-select placeholder="Map Type">
                            <mat-option *ngFor="let mType of mapTypeList" [value]="mType.mapType" (onSelectionChange)="makeAll_isTreasurySelected($event, false); makeAll_isReceiverSelected($event, false); onMapValueSelect($event, mType.mapId)">
                                {{ mType.mapType }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div> -->

                <div class="col-md mt-2">
                    <strong>Distribute to:&nbsp;</strong>
                    <mat-radio-group aria-label="Select an option" class="ml-3">
                        <mat-radio-button value="MapDDO" (click)="distToFlag = 'mapped'; resetAmountDdoForm(); onMapValueSelect($event, mapType ? EnumReleaseMapType.HOD_to_DDO : EnumReleaseMapType.SAO_to_DDO)"> Mapped DDO &nbsp; </mat-radio-button>
                        <mat-radio-button value="ownDDO" (click)="distToFlag = 'own'; getOwnDdoAndPupulateWithData($event); makeAll_isTreasurySelected($event, false); makeAll_isReceiverSelected($event, false); onMapValueSelect($event, mapType ? 1 : 2)"> Own DDO &nbsp;</mat-radio-button>
                        <mat-radio-button value="allDDO" (click)="distToFlag = 'all'; resetAmountDdoForm(); onClickAllDdo($event); onMapValueSelect($event, mapType ? 1 : 2)">All DDO &nbsp;</mat-radio-button>
                        <mat-radio-button value="sao" (click)="distToFlag = 'sao'; onMapValueSelect($event, mapType ? 0 : 3)">SAO&nbsp;</mat-radio-button>
                        <mat-radio-button value="favlist" (click)="distToFlag = 'favlist'; onMapValueSelect($event, mapType ? EnumReleaseMapType.HOD_to_SAODDO : EnumReleaseMapType.SAO_to_SAODDO)">FavList</mat-radio-button>
                    </mat-radio-group>
                </div>

                <!-- <div class="col-md-3 mt-2" *ngIf="distToFlag == 'own'">
                    <mat-label><span>Own DDO:</span></mat-label>
                    {{ receiverStruct.selectedReceiver.ddo_id }} : {{ receiverStruct.selectedReceiver.ddu_uname }}
                    : {{ receiverStruct.selectedReceiver.first_name }}
                    <span *ngIf="receiverStruct.selectedReceiver.middle_name != null">{{
                        receiverStruct.selectedReceiver.middle_name }}</span>
                    {{ receiverStruct.selectedReceiver.last_name }}
                </div> -->
            </div>
        </form>
        <mat-action-row>
            <button mat-raised-button color="primary" (click)="nextAccordionStep(); bindHOAtoSaoForm_n_DdoForm()">Next</button>
        </mat-action-row>
    </mat-expansion-panel>

    <mat-expansion-panel [hideToggle]="false" [expanded]="accordionStep === 3" (opened)="setAccordionStep(3)" class="formDesign" *ngIf="clickedRows.size != 0 && (distToFlag != null || mapId == EnumReleaseMapType.HOD_to_SAO || this.mapId == EnumReleaseMapType.SAO_to_SAO)">
        <div *ngIf="distToFlag !== 'favlist'">
            <mat-expansion-panel-header>
                <mat-panel-title>Set Amount</mat-panel-title>
            </mat-expansion-panel-header>
            <i>Selected Head of Account: {{ clickedRowsArray[0].demandNo + "-" + clickedRowsArray[0].majorHead + "-" + clickedRowsArray[0].submajorHead + "-" + clickedRowsArray[0].minorHead + "-" + clickedRowsArray[0].schemeHead + "-" + clickedRowsArray[0].detailHead + "-" + clickedRowsArray[0].subdetailHead + "-" + clickedRowsArray[0].votedCharged }}</i>
            <br /><i>Map Type: {{ mapId == EnumReleaseMapType.HOD_to_SAO ? "HOD to SAO" : mapId == EnumReleaseMapType.HOD_to_DDO ? "HOD to DDO" : mapId == EnumReleaseMapType.SAO_to_SAO ? "SAO to SAO" : "SAO to DDO" }}</i>
            <form [formGroup]="amountFormSAO" class="overflow-scroll">
                <table *ngIf="mapId === EnumReleaseMapType.HOD_to_SAO || this.mapId == EnumReleaseMapType.SAO_to_SAO" class="mat-table full-width text-center table table-striped table-sm table-bordered">
                    <thead>
                        <tr>
                            <th style="text-align: center">Allotment Date</th>
                            <th style="text-align: center">SAO Heirerchy</th>
                            <th style="text-align: center">SAO Code</th>
                            <th style="text-align: center">Balance Ceilling Amount</th>
                            <th style="text-align: center">Alloted Amount</th>
                            <th style="text-align: center">Ceilling Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Allotment Date</mat-label>
                                    <input matInput type="text" formControlName="allotmentDate" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <input matInput type="text" placeholder="SAO Heirarchy" [matAutocomplete]="saoHeirarchy" formControlName="saoHeirerchy" />
                                    <mat-icon matSuffix>arrow_drop_down</mat-icon>
                                    <mat-label>Sub Alloting Officer Heirarchy</mat-label>
                                    <mat-autocomplete #saoHeirarchy="matAutocomplete">
                                        <mat-option class="" *ngFor="let sao of saoHeirarchyList" [title]="sao.name" (onSelectionChange)="isSaoHeirerchySelected = true; onSaoHeirerchySelect($event, sao)" [value]="sao.name">
                                            {{ sao.name }}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <mat-error *ngIf="amountFormSAO.controls.saoHeirerchy.touched && amountFormSAO.controls.saoHeirerchy.invalid && amountFormSAO.controls.saoHeirerchy.errors?.required">Please select SAO Heirarchy</mat-error>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <input matInput type="text" (keyup)="searchSao($event)" placeholder="SAO Code" [matAutocomplete]="saoLst" formControlName="sao" />
                                    <mat-icon matSuffix>arrow_drop_down</mat-icon>
                                    <mat-label>Sub Alloting Officer</mat-label>
                                    <mat-autocomplete #saoLst="matAutocomplete" placeholder="Select Sub Alloting Officer">
                                        <mat-option class="" *ngFor="let sao of saoList" [title]="sao.name" (onSelectionChange)="isSaoSelected = true; onSaoSelect($event, sao, 0)" [value]="sao.code.toString().trim()">
                                            <mat-checkbox [checked]="selectedReceiver.includes(sao)" (change)="tickSao(sao)" (click)="$event.stopPropagation()"> {{ sao.code }}:{{ sao.name }} </mat-checkbox>
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <mat-error *ngIf="amountFormSAO.controls.sao.touched && amountFormSAO.controls.sao.invalid && amountFormSAO.controls.sao.errors?.required">Please select SAO</mat-error>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Balance Ceilling Amount </mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="balCeilAmt" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Alloted Amount</mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="allotedAmt" autocomplete="off" (keyup)="calCielAmt()" />
                                </mat-form-field>
                                <mat-error *ngIf="amountFormSAO.controls.allotedAmt.touched && amountFormSAO.controls.allotedAmt.invalid && amountFormSAO.controls.allotedAmt.errors?.required">Alloted Amount is required</mat-error>
                                <mat-error *ngIf="amountFormSAO.controls.allotedAmt.touched && amountFormSAO.controls.allotedAmt.invalid && amountFormSAO.controls.allotedAmt.errors?.pattern">Amount must be a whole number</mat-error>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Ceilling Amount</mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="ceilAmt" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>

            <form [formGroup]="amountFormDDO">
                <table *ngIf="mapId === EnumReleaseMapType.HOD_to_DDO || mapId === EnumReleaseMapType.SAO_to_DDO" class="mat-table full-width text-center table table-striped table-sm table-bordered">
                    <thead>
                        <tr>
                            <th style="text-align: center">Allotment Date</th>
                            <th style="text-align: center" *ngIf="distToFlag !== 'own'">Treasury</th>
                            <th style="text-align: center">DDO</th>
                            <th style="text-align: center">Balance Ceilling Amount</th>
                            <th style="text-align: center">Alloted Amount</th>
                            <th style="text-align: center">Ceilling Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Allotment Date</mat-label>
                                    <input matInput type="text" formControlName="allotmentDate" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>
                            <td *ngIf="distToFlag !== 'own'">
                                <mat-form-field class="full-width" appearance="outline">
                                    <input matInput type="text" (keyup)="searchTreasury($event)" placeholder="Treasury Code" [matAutocomplete]="treasuryCode" formControlName="tresuryCode" />
                                    <mat-icon matSuffix>arrow_drop_down</mat-icon>
                                    <mat-label>Treasury Code</mat-label>
                                    <mat-autocomplete #treasuryCode="matAutocomplete" (optionSelected)="bindDdoForSelectedTreasury(0)">
                                        <mat-option class="ctm-auto-ddl" *ngFor="let treasury of treasuryList" [title]="treasury.code" (onSelectionChange)="isTreasurySelected = true; onTreasurySelect($event, treasury.code, 0)" [value]="treasury.code + '  :  ' + treasury.districtName"> {{ treasury.code }} : {{ treasury.districtName }} </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <mat-error *ngIf="amountFormDDO.controls.tresuryCode.touched && amountFormDDO.controls.tresuryCode.invalid && amountFormDDO.controls.tresuryCode.errors?.required">Treasury Code is required</mat-error>
                            </td>
                            <td>
                                <mat-form-field class="full-width" appearance="outline">
                                    <input matInput type="text" (keyup)="searchDdo($event)" placeholder="DDO Code" [matAutocomplete]="cChild" formControlName="ddoCode" />
                                    <mat-icon matSuffix>arrow_drop_down</mat-icon>
                                    <mat-label>DDO Code</mat-label>
                                    <mat-autocomplete #cChild="matAutocomplete">
                                        <mat-option class="ctm-auto-ddl" *ngFor="let ddo of ddoList" [title]="ddo.designation" (onSelectionChange)="isDdoSelected = true; onDdoSelect($event, ddo, 0)" [value]="ddo.code + '  :  ' + ddo.designation" id="receiverDdo">
                                            <mat-checkbox [checked]="selectedReceiver.includes(ddo)" (change)="tickDdo(ddo)" (click)="$event.stopPropagation()"> {{ ddo.code }} : {{ ddo.designation }} </mat-checkbox>
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <mat-error *ngIf="amountFormDDO.controls.ddoCode.touched && amountFormDDO.controls.ddoCode.invalid && amountFormDDO.controls.ddoCode.errors?.required">DDO Code is required</mat-error>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Balance Ceilling Amount </mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="balCeilAmt" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Alloted Amount</mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="allotedAmt" autocomplete="off" (keyup)="calCielAmt()" />
                                </mat-form-field>
                                <mat-error>
                                    <custom-mat-error [control]="amountFormDDO.controls.allotedAmt"></custom-mat-error>
                                </mat-error>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Ceilling Amount</mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="ceilAmt" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>

        <div *ngIf="distToFlag === 'favlist'">
            <mat-expansion-panel-header>
                <mat-panel-title>Set Amount</mat-panel-title>
            </mat-expansion-panel-header>
            <i>Selected Head of Account: {{ clickedRowsArray[0].demandNo + "-" + clickedRowsArray[0].majorHead + "-" + clickedRowsArray[0].submajorHead + "-" + clickedRowsArray[0].minorHead + "-" + clickedRowsArray[0].schemeHead + "-" + clickedRowsArray[0].detailHead + "-" + clickedRowsArray[0].subdetailHead + "-" + clickedRowsArray[0].votedCharged }}</i>
            <br /><i>Map Type: {{ mapId == EnumReleaseMapType.HOD_to_SAO ? "HOD to SAO" : mapId == EnumReleaseMapType.HOD_to_DDO ? "HOD to DDO" : mapId == EnumReleaseMapType.SAO_to_SAO ? "SAO to SAO" : mapId == EnumReleaseMapType.SAO_to_DDO ? "SAO to DDO" : mapId == EnumReleaseMapType.HOD_to_SAODDO ? "FAV LIST" : mapId == EnumReleaseMapType.SAO_to_SAODDO ? "FAV LIST" : "" }}</i>
            <form [formGroup]="amountFormSAODDO" class="overflow-scroll">
                <table class="mat-table full-width text-center table table-striped table-sm table-bordered">
                    <thead>
                        <tr>
                            <th style="text-align: center">Allotment Date</th>
                            <th style="text-align: center">SAO/DDO</th>
                            <th style="text-align: center">Balance Ceilling Amount</th>
                            <th style="text-align: center">Alloted Amount</th>
                            <th style="text-align: center">Ceilling Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Allotment Date</mat-label>
                                    <input matInput type="text" formControlName="allotmentDate" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <input matInput type="text" placeholder="SAO/DDO" [matAutocomplete]="Saoddo" formControlName="saoDdoCode" />
                                    <mat-icon matSuffix>arrow_drop_down</mat-icon>
                                    <mat-label>SAO/DDO</mat-label>
                                    <mat-autocomplete #Saoddo="matAutocomplete">
                                        <mat-option class="" *ngFor="let saoddo of saoDdoList" [title]="saoddo.payload.saoDdo.code" (onSelectionChange)="onSaoDdoSelect($event, saoddo)" [value]="saoddo.payload.saoDdo.code"> {{ saoddo.payload.saoDdo.code }} : {{ saoddo.payload.saoDdo.name }} </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <mat-error *ngIf="amountFormSAODDO.controls.saoDdoCode.touched && amountFormSAODDO.controls.saoDdoCode.invalid && amountFormSAODDO.controls.saoDdoCode.errors?.required">Please select SAO/DDO</mat-error>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Balance Ceilling Amount </mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="balCeilAmt" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Alloted Amount</mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="allotedAmt" autocomplete="off" (keyup)="calCielAmt()" />
                                </mat-form-field>
                                <mat-error *ngIf="amountFormSAODDO.controls.allotedAmt.touched && amountFormSAODDO.controls.allotedAmt.invalid && amountFormSAODDO.controls.allotedAmt.errors?.required">Alloted Amount is required</mat-error>
                                <mat-error *ngIf="amountFormSAODDO.controls.allotedAmt.touched && amountFormSAODDO.controls.allotedAmt.invalid && amountFormSAODDO.controls.allotedAmt.errors?.pattern">Amount must be a whole number</mat-error>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" class="full-width">
                                    <mat-label>Ceilling Amount</mat-label>
                                    <span matPrefix>₹&nbsp;</span>
                                    <input matInput type="number" formControlName="ceilAmt" autocomplete="off" readonly />
                                </mat-form-field>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>

        <mat-action-row>
            <button mat-raised-button color="primary" (click)="emitPayload()">Add</button>
        </mat-action-row>
    </mat-expansion-panel>
</mat-accordion>
